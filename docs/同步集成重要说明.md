# åŒæ­¥é›†æˆé‡è¦è¯´æ˜ âš ï¸

## ğŸ”„ æ­£ç¡®çš„å¼€å‘æµç¨‹

### âŒ é”™è¯¯åšæ³•ï¼ˆä¼šç ´ååŒæ­¥ï¼‰

```bash
# ç›´æ¥ä¿®æ”¹ç”Ÿæˆçš„æ–‡ä»¶
vi jq-backtest-standalone-full/backend/data_provider/simple_provider.py
```

**é—®é¢˜**ï¼šè¿™ä¼šå¯¼è‡´ç”Ÿæˆè„šæœ¬å’Œå®é™…ä»£ç ä¸ä¸€è‡´ï¼Œä¸‹æ¬¡è¿è¡Œè„šæœ¬ä¼šè¦†ç›–ä¿®æ”¹ï¼

### âœ… æ­£ç¡®åšæ³•ï¼ˆä¿æŒåŒæ­¥ï¼‰

```bash
# 1. ä¿®æ”¹ç”Ÿæˆè„šæœ¬
vi scripts/generate_isolated_package_full.sh

# 2. é‡æ–°ç”Ÿæˆéš”ç¦»åŒ…
rm -rf jq-backtest-standalone-full
./scripts/generate_isolated_package_full.sh

# 3. æµ‹è¯•éªŒè¯
cd jq-backtest-standalone-full
python3 test_simple_provider.py
```

**ä¼˜ç‚¹**ï¼š
- âœ… è„šæœ¬æ˜¯å•ä¸€çœŸç›¸æºï¼ˆSingle Source of Truthï¼‰
- âœ… æ¯æ¬¡ç”Ÿæˆéƒ½ä¿æŒä¸€è‡´
- âœ… ä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š
- âœ… è‡ªåŠ¨åŒ–é›†æˆæ— å†²çª

---

## ğŸ“‹ æ–‡ä»¶æ¥æºæ¸…å•

### ç”±è„šæœ¬ç”Ÿæˆï¼ˆä¸è¦æ‰‹åŠ¨ä¿®æ”¹ï¼‰

```
jq-backtest-standalone-full/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ data_provider/
â”‚   â”‚   â”œâ”€â”€ __init__.py           â† è„šæœ¬ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ simple_provider.py    â† è„šæœ¬ç”Ÿæˆ âš ï¸
â”‚   â”œâ”€â”€ api_server.py              â† è„šæœ¬ç”Ÿæˆ
â”‚   â””â”€â”€ jq_backtest/               â† ä»ä¸»ç³»ç»Ÿå¤åˆ¶
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json               â† è„šæœ¬ç”Ÿæˆ
â”‚   â”œâ”€â”€ vite.config.ts            â† è„šæœ¬ç”Ÿæˆ
â”‚   â””â”€â”€ src/views/                 â† ä»ä¸»ç³»ç»Ÿå¤åˆ¶
â”‚
â”œâ”€â”€ interfaces/                    â† è„šæœ¬ç”Ÿæˆ
â”œâ”€â”€ README.md                      â† è„šæœ¬ç”Ÿæˆ
â””â”€â”€ pyproject.toml                 â† è„šæœ¬ç”Ÿæˆ
```

### å®ä¹ ç”Ÿéœ€è¦å®ç°ï¼ˆå¯ä»¥ä¿®æ”¹ï¼‰

```
jq-backtest-standalone-full/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ jq_backtest/
â”‚       â”œâ”€â”€ engine.py              â† éœ€è¦å®ç° âœï¸
â”‚       â”œâ”€â”€ strategy.py            â† éœ€è¦å®ç° âœï¸
â”‚       â””â”€â”€ csv_adapter.py         â† éœ€è¦å®ç° âœï¸
â”‚
â”œâ”€â”€ tests/                         â† æ·»åŠ æµ‹è¯• âœï¸
â””â”€â”€ examples/                      â† æ·»åŠ ç¤ºä¾‹ âœï¸
```

---

## ğŸ”§ ä¿®æ”¹å·¥ä½œæµç¨‹

### åœºæ™¯1ï¼šä¿®æ”¹æ•°æ®æä¾›è€…

```bash
# æ­¥éª¤1ï¼šä¿®æ”¹è„šæœ¬ä¸­çš„ simple_provider.py éƒ¨åˆ†
vi scripts/generate_isolated_package_full.sh

# æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
# cat > "$OUTPUT_DIR/backend/data_provider/simple_provider.py" << 'EOF'

# åœ¨ 'EOF' ä¹‹é—´ä¿®æ”¹ä»£ç 

# æ­¥éª¤2ï¼šé‡æ–°ç”Ÿæˆ
rm -rf jq-backtest-standalone-full
./scripts/generate_isolated_package_full.sh

# æ­¥éª¤3ï¼šæµ‹è¯•
cd jq-backtest-standalone-full
python3 test_simple_provider.py
```

### åœºæ™¯2ï¼šä¿®æ”¹APIæœåŠ¡å™¨

```bash
# æ­¥éª¤1ï¼šä¿®æ”¹è„šæœ¬ä¸­çš„ api_server.py éƒ¨åˆ†
vi scripts/generate_isolated_package_full.sh

# æ‰¾åˆ°ï¼š
# cat > "$OUTPUT_DIR/backend/api_server.py" << 'EOF'

# æ­¥éª¤2ï¼šé‡æ–°ç”Ÿæˆå’Œæµ‹è¯•
rm -rf jq-backtest-standalone-full
./scripts/generate_isolated_package_full.sh
```

### åœºæ™¯3ï¼šå®ä¹ ç”Ÿå®ç°å¼•æ“ä»£ç 

```bash
# âœ… è¿™äº›æ–‡ä»¶å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼ˆä¸æ˜¯è„šæœ¬ç”Ÿæˆçš„å®Œæ•´å®ç°ï¼‰
vi jq-backtest-standalone-full/backend/jq_backtest/engine.py
vi jq-backtest-standalone-full/backend/jq_backtest/strategy.py
vi jq-backtest-standalone-full/backend/jq_backtest/csv_adapter.py

# âœ… æµ‹è¯•ä»£ç ä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ 
vi jq-backtest-standalone-full/tests/test_engine.py
```

---

## ğŸ”„ é›†æˆå›ä¸»ä»“åº“

### ä½¿ç”¨åŒæ­¥è„šæœ¬

```bash
# æ­¥éª¤1ï¼šæ£€æŸ¥åŒæ­¥çŠ¶æ€
./scripts/sync_tools/check_sync_status.sh

# æ­¥éª¤2ï¼šæ‰§è¡Œè‡ªåŠ¨åŒ–é›†æˆ
./scripts/sync_tools/sync_from_jq_backtest.sh

# æ­¥éª¤3ï¼šéªŒè¯é›†æˆ
cd /tmp/main-repo
pytest tests/
```

**é‡è¦**ï¼šåŒæ­¥è„šæœ¬ä¼šï¼š
- âœ… è‡ªåŠ¨è°ƒæ•´å¯¼å…¥è·¯å¾„
- âœ… åˆå¹¶å®ä¹ ç”Ÿå®ç°çš„ä»£ç 
- âœ… ä¿ç•™ä¸»ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½
- âœ… è¿è¡Œæµ‹è¯•éªŒè¯

---

## ğŸ“Š ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

### ä¸»ä»“åº“ï¼ˆstarquant4ï¼‰

```bash
# è„šæœ¬æ˜¯ç‰ˆæœ¬æ§åˆ¶çš„æ ¸å¿ƒ
git add scripts/generate_isolated_package_full.sh
git commit -m "feat: update simple_provider with format detection"

# ä¸è¦æäº¤ç”Ÿæˆçš„ç›®å½•
echo "jq-backtest-standalone-full/" >> .gitignore
```

### ç‹¬ç«‹ä»“åº“ï¼ˆstarquant4-backtestï¼‰

```bash
# å®ä¹ ç”Ÿå¼€å‘çš„ä»£ç éœ€è¦ç‰ˆæœ¬æ§åˆ¶
cd jq-backtest-standalone-full
git init
git add backend/jq_backtest/engine.py
git add backend/jq_backtest/strategy.py
git add tests/
git commit -m "feat: implement backtest engine"
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q: æˆ‘ä¸å°å¿ƒæ‰‹åŠ¨ä¿®æ”¹äº†ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ€ä¹ˆåŠï¼Ÿ

**A**: ä¸¤ä¸ªé€‰æ‹©ï¼š

1. **å›é€€ä¿®æ”¹**ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   rm -rf jq-backtest-standalone-full
   ./scripts/generate_isolated_package_full.sh
   ```

2. **åŒæ­¥ä¿®æ”¹åˆ°è„šæœ¬**ï¼š
   ```bash
   # å¯¹æ¯”å·®å¼‚
   diff jq-backtest-standalone-full/backend/data_provider/simple_provider.py \
        <(./scripts/generate_isolated_package_full.sh | tail -n +XXX)
   
   # æ‰‹åŠ¨æ›´æ–°è„šæœ¬
   vi scripts/generate_isolated_package_full.sh
   ```

### Q: å¦‚ä½•çŸ¥é“å“ªäº›æ–‡ä»¶æ˜¯è„šæœ¬ç”Ÿæˆçš„ï¼Ÿ

**A**: çœ‹æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šæˆ–è¿è¡Œï¼š

```bash
# æŸ¥çœ‹ç”Ÿæˆæ—¥å¿—
./scripts/generate_isolated_package_full.sh 2>&1 | tee generation.log

# è„šæœ¬ä¼šæ˜ç¡®æ ‡æ³¨ï¼š
# "ç”Ÿæˆé…ç½®æ–‡ä»¶..."
# "å¤åˆ¶å‰ç«¯é¡µé¢..."
```

### Q: å®ä¹ ç”Ÿæäº¤çš„ä»£ç å¦‚ä½•é›†æˆï¼Ÿ

**A**: ä½¿ç”¨è‡ªåŠ¨åŒ–é›†æˆè„šæœ¬ï¼š

```bash
# 1. å®ä¹ ç”Ÿæ¨é€åˆ°ç‹¬ç«‹ä»“åº“
cd jq-backtest-standalone-full
git push origin main

# 2. ä¸»ç³»ç»Ÿæ‹‰å–å¹¶é›†æˆ
cd /path/to/main-repo
./scripts/sync_tools/sync_from_jq_backtest.sh
```

---

## âœ… æœ€ä½³å®è·µæ£€æŸ¥æ¸…å•

å¼€å‘å‰ï¼š
- [ ] ç†è§£å“ªäº›æ–‡ä»¶ç”±è„šæœ¬ç”Ÿæˆ
- [ ] ç†è§£å“ªäº›æ–‡ä»¶éœ€è¦å®ç°
- [ ] ç†Ÿæ‚‰é‡æ–°ç”Ÿæˆæµç¨‹

å¼€å‘ä¸­ï¼š
- [ ] åªä¿®æ”¹éœ€è¦å®ç°çš„æ–‡ä»¶
- [ ] ä¸ç›´æ¥ä¿®æ”¹è„šæœ¬ç”Ÿæˆçš„æ–‡ä»¶
- [ ] å®šæœŸæµ‹è¯•éªŒè¯

å¼€å‘åï¼š
- [ ] æäº¤å‰æ£€æŸ¥ä¿®æ”¹çš„æ–‡ä»¶
- [ ] ä½¿ç”¨é›†æˆè„šæœ¬è€Œéæ‰‹åŠ¨åˆå¹¶
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

---

## ğŸ“ æ±‚åŠ©

å¦‚æœé‡åˆ°åŒæ­¥é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**ï¼š
   - `docs/èšå®½å›æµ‹æ¨¡å—_åŒå‘åŒæ­¥é›†æˆæ–¹æ¡ˆ.md`
   - `docs/èšå®½å›æµ‹æ¨¡å—_é›†æˆæ£€æŸ¥æ¸…å•.md`

2. **è¿è¡Œè¯Šæ–­**ï¼š
   ```bash
   ./scripts/sync_tools/check_sync_status.sh
   ```

3. **é‡æ–°ç”Ÿæˆ**ï¼ˆæœ€åæ‰‹æ®µï¼‰ï¼š
   ```bash
   rm -rf jq-backtest-standalone-full
   ./scripts/generate_isolated_package_full.sh
   ```

---

**è®°ä½ï¼šè„šæœ¬æ˜¯å•ä¸€çœŸç›¸æºï¼** ğŸ¯
